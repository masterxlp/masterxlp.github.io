---
layout: post
title:  "[G] Python"
date:   2020-06-06 12:23:00 +0800
categories: Code Tools
tags: Python G
author: Xlp
---
* content
{:toc}

## 01. 内置函数
### list
> extend()方法：用于在列表末尾一次性追加另一个序列中的多个值（用新列表来扩展原来的列表）  

```ruby
aList = [2020, 'xlp', 'create']
bList = ['zara', 'and', 'fresh']
aList.extend(bList)

print('Extend list : ', aList)
# => Extend list :  [2020, 'xlp', 'create', 'zara', 'and', 'fresh']
```




### random
> random模块包含random、randint、randrange、uniform、choice、sample、shuffle等方法  
>> `random()`方法返回一个[0,1)之间的随机浮点数  
>> `uniform(1,2)`方法返回一个[1,2]之间的随机浮点数，注意与numpy.random.uniform区别，numpy返回的是从均匀分布中生成的随机数  
>> `randint(1,5)`方法返回一个[1,5]之间的随机整数  
>> `choice(str)`方法返回的是str中的一个随机元素  
>> `sample(seq, num)`方法是从seq中不重复的选择num个随机元素，seq是iter的  
>> `shuffle(seq)`方法返回打乱顺序的seq，该方法无返回值  

```ruby
import random

# Test random
random.random()
# => 0.5801035425996243

# Test uniform
random.uniform(1,2)
# => 1.4719897016478751

# Test randint
random.randint(1,5)
# => 3

# Test choice
random.choice("I am a good boy.")
# => 'b'

# Test sample
random.sample([1, 2, 3], 3)
# => [2, 1, 3]

# Test shuffle
lst = [1, 2, 3, 4, 5]
random.shuffle(lst)
print('Shuffled list is ', lst)
# => Shuffled list is [1, 3, 4, 2, 5]
```

## 02. 技巧
### “嵌套函数” 代替 “条件判断”

```ruby
# 变量nb_entires表示当前buffer中的数据量
nb_entires = memory.nb_entires

# 实现：根据当前的数据量确定训练的次数nb_train
# 一般实现
# # 定义常量threshold表示开始改变训练次数的临界点
threshold = int(1e3)
nb_train = (nb_entires // threshold) if (nb_entires % threshold) > 10 else 10

# 函数嵌套实现
def constfn(threshold):
    def f(nb_entires):
        return max(10, nb_entires // threshold)
    return f

# # 使用时
train = constfn(threshold)
nb_train = train(nb_entires)
```

### 多维数组取值

```ruby
# ------------------------------------ #
# 第一个位置表示要取值的维度索引           #
# 第二个位置表示要去值的维度的子数组的索引  #
# 两个位置的shape应当相同                #
# ------------------------------------ #
>>> a = np.arange(40).reshape([10, 4])
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23],
       [24, 25, 26, 27],
       [28, 29, 30, 31],
       [32, 33, 34, 35],
       [36, 37, 38, 39]])
# 取一个值
# # 方法1：一般方法
>>> a[0][0]
0
# # 方法2：列表取值
>>> a[0, 0]
0
# 单个维度取多个值
# # 方法1
>>> lst = []
>>> for i in range(3):
...     lst.append(a[0][i])
... np.array(lst)
... 
array([0, 1, 2])
# # 方法2
>>> a[0, [0, 1, 2]]
array([0, 1, 2])
# 多个维度取单个值
>>> a[range(5), [0, 1, 2, 1, 2]]
array([ 0,  5, 10, 13, 18])
# 多个维度取多个值
>>> a[[[1, 1], [2, 2], [3, 3], [4, 4]], [[1,2], [2, 1], [1, 1], [0, 0]]]
```

## 03. Python执行Linux命令
> 在python中执行Linux命令的方法有很多，如sys、command等，但是官方推荐的方法为 subprocess

通过subprocess模块实现批量pip install包的程序的实现：

```ruby
import subprocess
import time

def install(filename):
    with open(filename, 'r') as file:
        for line in file:
            line = line.replace('\n', '').strip().split(' ')
            name, version = line[0], line[1]
            result = subprocess.call("pip install " + str(name) + "==" + str(version), shell=True)
            if result == 0:
                print("Success install package %s==%s." % (str(name), str(version)))
            else:
                print("Don't install package %s==%s." % (str(name), str(version)))
```





































